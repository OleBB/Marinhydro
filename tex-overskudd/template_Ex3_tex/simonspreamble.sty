\ProvidesClass{simonspreamble}
\RequirePackage[utf8]{inputenc}

%%%%%% LANGUAGE %%%%%%
\RequirePackage[TS1,T1, T2A]{fontenc}
\RequirePackage[russian, english]{babel}
\RequirePackage{csquotes}

%%%%%% TYPESETTING PRETTIFYING %%%%%%
\RequirePackage{mathtools}
\RequirePackage{scalerel}
%% Scaled down \in symbol for subscripts %%
\newcommand{\smallerrel}[1]{\mathrel{\mathpalette\smallerrelaux{#1}}}
\newcommand{\smallerrelaux}[2]{\raisebox{.1ex}{\scalebox{.75}{$#1#2$}}}
\newcommand{\smallin}{\smallerrel{\in}}

%%%%%% LAYOUT %%%%%%
\RequirePackage{fancyhdr}
\RequirePackage{lastpage}
\RequirePackage{enumerate}
\RequirePackage{enumitem}
\RequirePackage{listings}
\RequirePackage{caption}
\RequirePackage{titling}
\RequirePackage{floatrow}
\RequirePackage{sidecap}
\RequirePackage{subfiles}
\RequirePackage[perpage]{footmisc}%restart footnotes per page
\RequirePackage{dblfnote}

%%%%%% PAGE LAYOUT SETTINGS %%%%%%
\RequirePackage{geometry}
\geometry{a4paper, margin=1in}
\RequirePackage{changepage}
\newcommand{\subtitle}[1]{%
  \posttitle{%
    \par\end{center}
    \begin{center}\large#1\end{center}
    \vskip0.5em}%
}
\setcounter{secnumdepth}{0}
\pagestyle{fancy}
\cfoot{}
\rfoot{Page \thepage \hspace{1pt} of \pageref{LastPage}}
\lhead{\textit{\headcourse}}
\chead{\headtitle}

%%%%%% BIBLIOGRAPHY %%%%%%
\RequirePackage{biblatex}
\addbibresource{bibliography.bib}

%%%%%% REFERENCING %%%%%%
\RequirePackage{hyperref}
\hypersetup{
    colorlinks,
    linkcolor={black},
    citecolor={black},
    urlcolor={black}
}
\RequirePackage{cleveref}
\RequirePackage{biblatex}

%%%%%% MATH TYPESETTING PACKAGES %%%%%%
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amsthm}
\RequirePackage{amssymb}
\RequirePackage{bm}
\RequirePackage{xfrac}
\RequirePackage{tensor}
\usepackage{mathrsfs}

%%%%%% Pi-theorem matrix %%%%%%
\RequirePackage{nicematrix}

%%%%%% REFERENCING %%%%%%
\RequirePackage{hyperref}
\RequirePackage{cleveref}
\RequirePackage{biblatex}

%%%%%% Graphics %%%%%%
\RequirePackage{graphicx}
\RequirePackage{subcaption}
\RequirePackage{tikz}
\usetikzlibrary{patterns, 3d, arrows}
\RequirePackage[outline]{contour}

%%%%%% PHYSICS %%%%%%
\RequirePackage[version=4]{mhchem}
\RequirePackage{siunitx}

%%%%%% CODE/PROGRAMMING TYPESETTING %%%%%%
\RequirePackage[numbered,framed]{matlab-prettifier}

%%%%%%%%%%%%%%%%%%%%%%%% CUSTOM SYMBOLS %%%%%%%%%%%%%%%%%%%%%%%%
%%%% POLAR R %%%%
\newcommand{\kaufmannr}{\mathchoice
    {\mbox{$\resizebox{1ex}{1ex}{\includegraphics{SYMBOLS/Kaufmann_r_bold.pdf}}$}}
    {\mbox{$\resizebox{1ex}{1ex}{\includegraphics{SYMBOLS/Kaufmann_r_bold.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{1ex}{1ex}{\includegraphics{SYMBOLS/Kaufmann_r_bold.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{1ex}{1ex}{\includegraphics{SYMBOLS/Kaufmann_r_bold.pdf}}$}}}
}

%%%% M-PLUS %%%%
\newcommand{\nnn}{\mathchoice
    {\mbox{$\resizebox{1em}{.45em}{\includegraphics{SYMBOLS/nnn.pdf}}$}}
    {\mbox{$\resizebox{1em}{.45em}{\includegraphics{SYMBOLS/nnn.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{1em}{.45em}{\includegraphics{SYMBOLS/nnn.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{1em}{.45em}{\includegraphics{SYMBOLS/nnn.pdf}}$}}}
}

%%%%%%%% TRIPLE-U %%%%%%%%
\newcommand{\vvv}{\mathchoice
    {\mbox{$\resizebox{8.5pt}{4.5pt}{\includegraphics{SYMBOLS/wv.pdf}}$}}
    {\mbox{$\resizebox{8.5pt}{4.5pt}{\includegraphics{SYMBOLS/wv.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{8.5pt}{4.5pt}{\includegraphics{SYMBOLS/wv.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{8.5pt}{4.5pt}{\includegraphics{SYMBOLS/wv.pdf}}$}}}
}
%%%% TRIPLPE-U VECTOR %%%%
\newcommand{\bvvv}{\mathchoice
    {\mbox{$\resizebox{9.6pt}{4.6pt}{\includegraphics{SYMBOLS/wv_bm.pdf}}$}}
    {\mbox{$\resizebox{9.6pt}{4.6pt}{\includegraphics{SYMBOLS/wv_bm.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{9.6pt}{4.6pt}{\includegraphics{SYMBOLS/wv_bm.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{9.6pt}{4.6pt}{\includegraphics{SYMBOLS/wv_bm.pdf}}$}}}
}
%%%%%%%% OTHAL %%%%%%%%
\newcommand{\othal}{\mathchoice
    {\raisebox{-.1em}{\mbox{$\resizebox{.09in}{.1in}{\includegraphics{SYMBOLS/Othal_slim.pdf}}$}}}
    {\raisebox{-.1em}{\mbox{$\resizebox{.09in}{.1in}{\includegraphics{SYMBOLS/Othal_slim.pdf}}$}}}
    {\raisebox{-0.1em}{\scalebox{.7}{\mbox{$\resizebox{.09in}{.1in}{\includegraphics{SYMBOLS/Othal_slim.pdf}}$}}}}
    {\raisebox{-0.1em}{\scalebox{.5}{\mbox{$\resizebox{.09in}{.1in}{\includegraphics{SYMBOLS/Othal_slim.pdf}}$}}}}
}
%%%% OTHAL TYPERWRITER %%%%
\newcommand{\othaltt}{\mathchoice
    {\raisebox{-0.09\totalheight}{\mbox{$\resizebox{.08in}{.09in}{\includegraphics{SYMBOLS/Othaltt.pdf}}$}}}
    {\raisebox{-0.09\totalheight}{\mbox{$\resizebox{.08in}{.1in}{\includegraphics{SYMBOLS/Othaltt.pdf}}$}}}
    {\scalebox{.7}{\raisebox{-0.09\totalheight}{\mbox{$\resizebox{.08in}{.09in}{\includegraphics{SYMBOLS/Othaltt.pdf}}$}}}}
    {\scalebox{.5}{\raisebox{-0.09\totalheight}{\mbox{$\resizebox{.08in}{.09in}{\includegraphics{SYMBOLS/Othaltt.pdf}}$}}}}
}
%%%%%%%% eta TYPEWRITER %%%%%%%%
\newcommand{\etatt}{\mathchoice
    {\raisebox{-.5ex}{\mbox{$\resizebox{1ex}{1.5ex}{\includegraphics{SYMBOLS/etatt.pdf}}$}}}
    {\raisebox{-.5ex}{\mbox{$\resizebox{1ex}{1.5ex}{\includegraphics{SYMBOLS/etatt.pdf}}$}}}
    {\scalebox{.7}{\raisebox{-.5ex}{\mbox{$\resizebox{1ex}{1.5ex}{\includegraphics{SYMBOLS/etatt.pdf}}$}}}}
    {\scalebox{.5}{\raisebox{-.5ex}{\mbox{$\resizebox{1ex}{1.5ex}{\includegraphics{SYMBOLS/etatt.pdf}}$}}}}
}
%%%%%%%% HETA %%%%%%%%
\newcommand{\Heta}{\mathchoice
    {\mbox{$\resizebox{.067in}{.1in}{\includegraphics{SYMBOLS/Heta_Obl.pdf}}$}}
    {\mbox{$\resizebox{.067in}{.1in}{\includegraphics{SYMBOLS/Heta_Obl.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{.067in}{.1in}{\includegraphics{SYMBOLS/Heta_Obl.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{.067in}{.1in}{\includegraphics{SYMBOLS/Heta_Obl.pdf}}$}}}
}
%%%% HETA TYPEWRITER %%%%
\newcommand{\Hetatt}{\mathchoice
    {\mbox{$\resizebox{.05in}{.09in}{\includegraphics{SYMBOLS/Hetatt.pdf}}$}}
    {\mbox{$\resizebox{.05in}{.09in}{\includegraphics{SYMBOLS/Hetatt.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{.05in}{.09in}{\includegraphics{SYMBOLS/Hetatt.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{.05in}{.09in}{\includegraphics{SYMBOLS/Hetatt.pdf}}$}}}
}
%%%%%%%% CHE %%%%%%%%
\newcommand{\che}{\mathchoice
    {\mbox{$\resizebox{1.058ex}{1ex}{\includegraphics{SYMBOLS/Che_it.pdf}}$}}
    {\mbox{$\resizebox{1.058ex}{1ex}{\includegraphics{SYMBOLS/Che_it.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{1.058ex}{1ex}{\includegraphics{SYMBOLS/Che_it.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{1.058ex}{1ex}{\includegraphics{SYMBOLS/Che_it.pdf}}$}}}
}
%%%%%%%% THORN %%%%%%%%
\newcommand{\thorn}{\mathchoice
    {\raisebox{-0.404ex}{\mbox{$\resizebox{1.1459ex}{1.96ex}{\includegraphics{SYMBOLS/thorn_it.pdf}}$}}}
    {\raisebox{-0.404ex}{\mbox{$\resizebox{1.1459ex}{1.96ex}{\includegraphics{SYMBOLS/thorn_it.pdf}}$}}}
    {\scalebox{.7}{\raisebox{-0.404ex}{\mbox{$\resizebox{1.1459ex}{1.96ex}{\includegraphics{SYMBOLS/thorn_it.pdf}}$}}}}
    {\scalebox{.5}{\raisebox{-0.404ex}{\mbox{$\resizebox{1.1459ex}{1.96ex}{\includegraphics{SYMBOLS/thorn_it.pdf}}$}}}}
}

%Zehfuss Product
\newcommand{\zehfuss}{\,\mathchoice
    {\mbox{$\resizebox{.7em}{!}{\includegraphics{SYMBOLS/zehfuss.pdf}}$}}
    {\mbox{$\resizebox{.7em}{!}{\includegraphics{SYMBOLS/zehfuss.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{.7em}{!}{\includegraphics{SYMBOLS/zehfuss.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{.7em}{!}{\includegraphics{SYMBOLS/zehfuss.pdf}}$}}}\,
}

%%%% NAMI, HENTAIGANA HA VAR. 4 %%%%
\newcommand{\hentaiha}{\mathchoice
    {\mbox{$\resizebox{.7em}{.75em}{\includegraphics{SYMBOLS/hentaigana_ha4.pdf}}$}}
    {\mbox{$\resizebox{.7em}{.75em}{\includegraphics{SYMBOLS/hentaigana_ha4.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{.7em}{.75em}{\includegraphics{SYMBOLS/hentaigana_ha4.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{.7em}{.75em}{\includegraphics{SYMBOLS/hentaigana_ha4.pdf}}$}}}
}

%%%%%%%%%%%% VARDIGAMMA %%%%%%%%%%%%
\newcommand{\vardigamma}{\mathchoice
    {\mbox{$\resizebox{1em}{.73em}{\includegraphics{SYMBOLS/varDigamma.pdf}}$}}
    {\mbox{$\resizebox{1em}{.73em}{\includegraphics{SYMBOLS/varDigamma.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{1em}{.73em}{\includegraphics{SYMBOLS/varDigamma.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{1em}{.73em}{\includegraphics{SYMBOLS/varDigamma.pdf}}$}}}
}

%%%%%%%%%%%% ROMAN I %%%%%%%%%%%%
\newcommand{\ROMANI}{\mathchoice
    {\mbox{$\resizebox{.43ex}{1ex}{\includegraphics{SYMBOLS/ROMAN_I.pdf}}$}}
    {\mbox{$\resizebox{.43ex}{1ex}{\includegraphics{SYMBOLS/ROMAN_I.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{.43ex}{1ex}{\includegraphics{SYMBOLS/ROMAN_I.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{.43ex}{1ex}{\includegraphics{SYMBOLS/ROMAN_I.pdf}}$}}}
}

%%%%%%%%%%%% ROMAN II %%%%%%%%%%%%
\newcommand{\ROMANII}{\mathchoice
    {\mbox{$\resizebox{.83ex}{1ex}{\includegraphics{SYMBOLS/ROMAN_II.pdf}}$}}
    {\mbox{$\resizebox{.83ex}{1ex}{\includegraphics{SYMBOLS/ROMAN_II.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{.83ex}{1ex}{\includegraphics{SYMBOLS/ROMAN_II.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{.83ex}{1ex}{\includegraphics{SYMBOLS/ROMAN_II.pdf}}$}}}
}

%%%%%%%%%%%% ROMAN III %%%%%%%%%%%%
\newcommand{\ROMANIII}{\mathchoice
    {\mbox{$\resizebox{1.17ex}{1ex}{\includegraphics{SYMBOLS/ROMAN_III.pdf}}$}}
    {\mbox{$\resizebox{1.17ex}{1ex}{\includegraphics{SYMBOLS/ROMAN_III.pdf}}$}}
    {\scalebox{.7}{\mbox{$\resizebox{1.17ex}{1ex}{\includegraphics{SYMBOLS/ROMAN_III.pdf}}$}}}
    {\scalebox{.5}{\mbox{$\resizebox{1.17ex}{1ex}{\includegraphics{SYMBOLS/ROMAN_III.pdf}}$}}}
}

%%%%%%%%%%%%%%%%%%%%%%%% ANALYSIS %%%%%%%%%%%%%%%%%%%%%%%%
\let\hideousepsilon\epsilon
\let\epsilon\varepsilon
\newcommand{\dee}{\mathrm{d}}
\newcommand{\Dee}{\mathrm{D}}
\newcommand{\deex}{\partial_x}
\newcommand{\deey}{\partial_y}
\newcommand{\deez}{\partial_z}
\newcommand{\deer}{\partial_r}
\newcommand{\deeth}{\partial_{\theta}}
\newcommand{\deet}{\partial_t}
\newcommand{\deetau}{\partial_{\tau}}
\newcommand{\deexi}{\partial_{\xi}}
\newcommand{\deezeta}{\partial_{\zeta}}
\newcommand{\deexxi}{\partial_{x\xi}}
\newcommand{\deexz}{\partial_{xz}}
\DeclareMathOperator{\adv}{adv}
\DeclareMathOperator{\dive}{div}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\curl}{curl}
\DeclareMathOperator{\trace}{tr}
\DeclareMathOperator{\erf}{erf}
\DeclareMathOperator{\erfc}{erfc}
\DeclareMathOperator{\bessel}{J}
\DeclareMathOperator{\neumann}{Y}
\renewcommand{\Re}{\operatorname{Re}}
\renewcommand{\Im}{\operatorname{Im}}
\DeclareMathOperator{\Res}{Res}
\DeclarePairedDelimiter\bracc\{\}
\DeclarePairedDelimiter{\innerprod}{\langle}{\rangle}
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}
\DeclarePairedDelimiter\absl\lvert\rvert
\newcommand{\eqdef}{\overset{\mathrm{def}}{=\joinrel=}}

%%%%%%%%%%%%%%%%%%%%%%%% TENSORS & VECTORS %%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%% HANDY %%%%%%%%%%%%
\newcommand{\uvec}{\bm{u}}
\newcommand{\xvec}{\bm{x}}
\newcommand{\eye}{\mathfrak{d}}
\newcommand{\jacobi}[1]{\bm{\mathfrak{J}_{#1}}}
%%%%%%%%%%%% PHYSICAL %%%%%%%%%%%%
\newcommand{\stress}{\mathfrak{P}}
\newcommand{\strain}{\mathfrak{e}}
\newcommand{\gravity}{\mathrm{g}}
\newcommand{\vgravity}{\mathbf{g}}
%%%%%%%%%%%% UNIT VECTORS %%%%%%%%%%%%
\newcommand{\ihat}{\boldsymbol{\hat{\imath}}}
\newcommand{\jhat}{\boldsymbol{\hat{\jmath}}}
\newcommand{\khat}{\boldsymbol{\hat{k}}}
\newcommand{\ehat}{\boldsymbol{\hat{\bm{e}}}}
\newcommand{\uhat}{\boldsymbol{\hat{\bm{u}}}}
\newcommand{\zhat}{\boldsymbol{\hat{\bm{z}}}}
\newcommand{\nhat}{\boldsymbol{\hat{\mathbf{n}}}}
\newcommand{\rhat}{\boldsymbol{\hat{\kaufmannr}}}
\newcommand{\tehat}{\boldsymbol{\hat{\vartheta}}}

%%%%%%%%%%%%%%%%%%%%%%%% DISCRETE NOTATION %%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\xtt}{{\textit{\texttt{x}}}}
\newcommand{\ytt}{{\textit{\texttt{y}}}}
\newcommand{\ztt}{{\textit{\texttt{z}}}}
\newcommand{\ttt}{{\textit{\texttt{t}}}}
\newcommand{\utt}{\textit{\texttt{u}}}
\newcommand{\naturals}{\mathbb{N}}

%%%%%%%%%%%%%%%%%%%%%%%% DIMONESIONLESS OR OTHERWISE NAMED NUMBERS %%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\Ekman}{\mathrm{Ek}}
\newcommand{\Euler}{\mathrm{Eu}}
\newcommand{\Stokes}{\mathrm{Stk}}
\newcommand{\Reynolds}{\mathrm{Re}}
\newcommand{\Rossby}{\mathrm{Ro}}
\newcommand{\Ursell}{\mathrm{Ur}}

%%%%%%%%%%%%%%%%%%%%%%%% THEOREMS %%%%%%%%%%%%%%%%%%%%%%%%
\newtheorem*{theorem}{Theorem}
\newtheorem*{proposition}{Proposition}
\theoremstyle{definition}
\newtheorem*{definition}{Definition}
\newtheorem*{corollary}{Corollary}
\newtheorem*{lemma}{Lemma}